"use strict";!function(i,t,s){var l="scrollBox",o={containerClass:"sb-container",containerNoScrollClass:"sb-container-noscroll",contentClass:"sb-content",scrollbarContainerClass:"sb-scrollbar-container",scrollBarClass:"sb-scrollbar"};function e(t,s){this.element=t,this.settings=i.extend({},o,s),this._defaults=o,this._name=l,this.init()}i.extend(e.prototype,{init:function(){this.addScrollbar(),this.addEvents(),this.onResize()},addScrollbar:function(){i(this.element).addClass(this.settings.containerClass),this.wrapper=i("<div class='"+this.settings.contentClass+"' />"),this.wrapper.append(i(this.element).contents()),i(this.element).append(this.wrapper),this.scollbarContainer=i("<div class='"+this.settings.scrollbarContainerClass+"' />"),this.scrollBar=i("<div class='"+this.settings.scrollBarClass+"' />"),this.scollbarContainer.append(this.scrollBar),i(this.element).prepend(this.scollbarContainer)},addEvents:function(){this.wrapper.on("scroll."+l,i.proxy(this.onScroll,this)),i(t).on("resize."+l,i.proxy(this.onResize,this)),this.scrollBar.on("mousedown."+l,i.proxy(this.onMousedown,this)),this.scrollBar.on("touchstart."+l,i.proxy(this.onTouchstart,this))},onTouchstart:function(o){var e=this;o.preventDefault();var n=e.scrollBar[0].offsetTop;i(s).on("touchmove."+l,function(t){var s=t.touches[0].pageY-o.touches[0].pageY;e.scrollBar[0].style.top=Math.min(e.scollbarContainer[0].clientHeight-e.scrollBar[0].clientHeight,Math.max(0,n+s))+"px",e.wrapper[0].scrollTop=e.wrapper[0].scrollHeight*e.scrollBar[0].offsetTop/e.scollbarContainer[0].clientHeight}),i(s).on("touchend."+l,function(){i(s).off("touchmove."+l),i(s).off("touchend."+l)})},onMousedown:function(o){var e=this;o.preventDefault();var n=e.scrollBar[0].offsetTop;i(s).on("mousemove."+l,function(t){var s=t.pageY-o.pageY;e.scrollBar[0].style.top=Math.min(e.scollbarContainer[0].clientHeight-e.scrollBar[0].clientHeight,Math.max(0,n+s))+"px",e.wrapper[0].scrollTop=e.wrapper[0].scrollHeight*e.scrollBar[0].offsetTop/e.scollbarContainer[0].clientHeight}),i(s).on("mouseup."+l,function(){i(s).off("mousemove."+l),i(s).off("mouseup."+l)})},onResize:function(){this.wrapper.css("max-height",i(this.element).height());var t=this.wrapper[0].clientHeight;this.scrollBar.css("height",this.scollbarContainer[0].clientHeight*t/this.wrapper[0].scrollHeight+"px"),this.scollbarContainer[0].clientHeight<=this.scrollBar[0].clientHeight?i(this.element).addClass(this.settings.containerNoScrollClass):i(this.element).removeClass(this.settings.containerNoScrollClass),this.onScroll()},onScroll:function(){this.scrollBar.css("top",Math.min(this.scollbarContainer[0].clientHeight-this.scrollBar[0].clientHeight,this.scollbarContainer[0].clientHeight*this.wrapper[0].scrollTop/this.wrapper[0].scrollHeight)+"px")}}),i.fn[l]=function(t){return this.each(function(){i.data(this,"plugin_"+l)||i.data(this,"plugin_"+l,new e(this,t))})}}(jQuery,window,document);